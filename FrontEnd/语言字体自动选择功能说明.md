# è¯­è¨€å­—ä½“è‡ªåŠ¨é€‰æ‹©åŠŸèƒ½è¯´æ˜

## é—®é¢˜æè¿°

1. åˆ‡æ¢è¯­è¨€æ—¶ï¼Œå­—ä½“æ²¡æœ‰ç«‹å³è‡ªåŠ¨åˆ‡æ¢ï¼ˆä¾‹å¦‚ä»ä¸­æ–‡åˆ‡æ¢åˆ°éŸ©è¯­æ—¶ï¼Œå­—ä½“åº”è¯¥ä» STHeiti åˆ‡æ¢åˆ° Arial Unicode MSï¼‰
2. ç‚¹å‡»"å¯¼å…¥"æŒ‰é’®å¯¼å…¥æ–‡æœ¬åï¼Œå­—ä½“æ²¡æœ‰æ ¹æ®å½“å‰è¯­è¨€è‡ªåŠ¨é€‰æ‹©

## è§£å†³æ–¹æ¡ˆ

### 1. åˆ›å»ºç»Ÿä¸€çš„å­—ä½“é€‰æ‹©å‡½æ•°

åˆ›å»ºäº† `getAutoFontsByLanguage` å‡½æ•°ï¼Œæ ¹æ®è¯­è¨€è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å­—ä½“ï¼š

```typescript
const getAutoFontsByLanguage = (
  language: string
): { fontFamily: string; secondaryFontFamily: string } => {
  // æ£€æŸ¥æ˜¯å¦ä¸ºä»å³åˆ°å·¦çš„è¯­è¨€
  const isRTL = () => {
    if (!language) return false;
    const rtlKeywords = [
      "Arabic",
      "Hebrew",
      "Persian",
      "Farsi",
      "Urdu",
      "Punjabi",
      "Somali",
    ];
    return rtlKeywords.some((keyword) => language.includes(keyword));
  };

  // æ£€æŸ¥æ˜¯å¦ä¸ºéœ€è¦ç‰¹æ®Šå­—ä½“çš„è¯­è¨€
  const needsUnicodeFont = () => {
    if (!language) return false;
    const unicodeFontLanguages = [
      "Korean",
      "Thai",
      "Vietnamese",
      "Hindi",
      "Bengali",
      "Tamil",
      "Telugu",
      "Gujarati",
      "Kannada",
      "Malayalam",
      "Punjabi",
      "Urdu",
    ];
    return (
      unicodeFontLanguages.some((lang) => language.includes(lang)) ||
      language.includes("KR") ||
      language.includes("TH") ||
      language.includes("VN")
    );
  };

  // æ ¹æ®è¯­è¨€è®¾ç½®å¯¹åº”çš„å­—ä½“
  if (language === "CN" || language.includes("Chinese")) {
    return {
      fontFamily: "STHeiti",
      secondaryFontFamily: "Arial",
    };
  } else if (language === "JP" || language.includes("Japanese")) {
    return {
      fontFamily: "STHeiti",
      secondaryFontFamily: "Arial",
    };
  } else if (isRTL() || needsUnicodeFont()) {
    return {
      fontFamily: "Arial Unicode MS",
      secondaryFontFamily: "Arial Unicode MS",
    };
  } else {
    return {
      fontFamily: "Arial",
      secondaryFontFamily: "Arial",
    };
  }
};
```

### 2. ä¿®æ”¹è¯­è¨€åˆ‡æ¢å‡½æ•°

ä¿®æ”¹ `handleLanguageChange` å‡½æ•°ï¼Œä½¿ç”¨ç»Ÿä¸€çš„å­—ä½“é€‰æ‹©å‡½æ•°ï¼š

**ä¿®æ”¹å‰**ï¼š

- åœ¨å‡½æ•°å†…éƒ¨é‡å¤å®šä¹‰å­—ä½“é€‰æ‹©é€»è¾‘
- ä½¿ç”¨å±€éƒ¨å˜é‡ `newFontFamily` å’Œ `newSecondaryFontFamily`

**ä¿®æ”¹å**ï¼š

- è°ƒç”¨ç»Ÿä¸€çš„ `getAutoFontsByLanguage` å‡½æ•°
- æ‰€æœ‰ `updateLabelData` è°ƒç”¨ä¸­ï¼Œéƒ½ä½¿ç”¨ `autoFonts.fontFamily` å’Œ `autoFonts.secondaryFontFamily`

```typescript
const handleLanguageChange = async (
  e: React.ChangeEvent<HTMLSelectElement>
) => {
  const newLanguage = e.target.value;

  // ä½¿ç”¨ç»Ÿä¸€çš„å­—ä½“é€‰æ‹©å‡½æ•°
  const autoFonts = getAutoFontsByLanguage(newLanguage);

  // ... å…¶ä½™é€»è¾‘ä½¿ç”¨ autoFonts.fontFamily å’Œ autoFonts.secondaryFontFamily
};
```

### 3. ä¿®æ”¹å¯¼å…¥å‡½æ•°

ä¿®æ”¹ `handleImport` å‡½æ•°ï¼Œåœ¨å¯¼å…¥æ–‡æœ¬åè‡ªåŠ¨æ ¹æ®å½“å‰è¯­è¨€é€‰æ‹©å­—ä½“ï¼š

```typescript
const handleImport = async () => {
  // ... å¯¼å…¥é€»è¾‘

  // æ ¹æ®å½“å‰è¯­è¨€è‡ªåŠ¨é€‰æ‹©å­—ä½“
  const autoFonts = getAutoFontsByLanguage(selectedLanguage);

  // æ›´æ–°åˆ°å¯¹åº”çš„å­—æ®µç±»å‹åŒºåŸŸï¼ŒåŒæ—¶æ›´æ–°å­—ä½“
  updateLabelData({
    basicInfo: fieldTypeGroups.basic_info.join("\n"),
    numberField: fieldTypeGroups.number_field.join("\n"),
    drugName: fieldTypeGroups.drug_name.join("\n"),
    numberOfSheets: fieldTypeGroups.number_of_sheets.join("\n"),
    drugDescription: fieldTypeGroups.drug_description.join("\n"),
    companyName: fieldTypeGroups.company_name.join("\n"),
    fontFamily: autoFonts.fontFamily, // æ–°å¢
    secondaryFontFamily: autoFonts.secondaryFontFamily, // æ–°å¢
  });

  // ...
};
```

## å­—ä½“é€‰æ‹©è§„åˆ™

### ä¸­æ–‡ (CN / Chinese)

- **ä¸»å­—ä½“**: STHeiti
- **æ¬¡å­—ä½“**: Arial

### æ—¥æ–‡ (JP / Japanese)

- **ä¸»å­—ä½“**: STHeiti
- **æ¬¡å­—ä½“**: Arial

### éŸ©è¯­ (KR / Korean)

- **ä¸»å­—ä½“**: Arial Unicode MS
- **æ¬¡å­—ä½“**: Arial Unicode MS

### æ³°è¯­ (TH / Thai)

- **ä¸»å­—ä½“**: Arial Unicode MS
- **æ¬¡å­—ä½“**: Arial Unicode MS

### è¶Šå—è¯­ (VN / Vietnamese)

- **ä¸»å­—ä½“**: Arial Unicode MS
- **æ¬¡å­—ä½“**: Arial Unicode MS

### RTL è¯­è¨€ï¼ˆé˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­ç­‰ï¼‰

- **ä¸»å­—ä½“**: Arial Unicode MS
- **æ¬¡å­—ä½“**: Arial Unicode MS

### å…¶ä»–è¯­è¨€

- **ä¸»å­—ä½“**: Arial
- **æ¬¡å­—ä½“**: Arial

## è§¦å‘æ—¶æœº

å­—ä½“ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨é€‰æ‹©ï¼š

1. **åˆ‡æ¢è¯­è¨€æ—¶** - `handleLanguageChange` å‡½æ•°
2. **å¯¼å…¥æ–‡æœ¬æ—¶** - `handleImport` å‡½æ•°
3. **åˆ‡æ¢åºå·æ—¶** - `handleNumberChange` å‡½æ•°ï¼ˆä»æ•°æ®åº“è¯»å–ï¼Œå¦‚æ— åˆ™ä½¿ç”¨è‡ªåŠ¨é€‰æ‹©ï¼‰
4. **ç‚¹å‡»é¡¹ç›®æ—¶** - `ProjectList.handleProjectClick` å‡½æ•°ï¼ˆä»æ•°æ®åº“è¯»å–ï¼Œå¦‚æ— åˆ™ä½¿ç”¨é»˜è®¤å€¼ï¼‰

## è°ƒè¯•ä¿¡æ¯

æ·»åŠ äº†æ§åˆ¶å°æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼š

```
ğŸ” getAutoFontsByLanguage è¢«è°ƒç”¨ï¼Œè¯­è¨€: KR South Korea/Korean
  ğŸ“ needsUnicodeFont æ£€æŸ¥ç»“æœ: true
  âœ… åŒ¹é…åˆ°ç‰¹æ®Šè¯­è¨€ï¼Œè¿”å› Arial Unicode MS
ğŸ”¤ å¯¼å…¥æ—¶è‡ªåŠ¨é€‰æ‹©å­—ä½“: {
  è¯­è¨€: 'KR South Korea/Korean',
  ä¸»å­—ä½“: 'Arial Unicode MS',
  æ¬¡å­—ä½“: 'Arial Unicode MS'
}
```

## æµ‹è¯•æ­¥éª¤

1. **æµ‹è¯•åˆ‡æ¢è¯­è¨€**:

   - é€‰æ‹©éŸ©è¯­ (KR South Korea/Korean)
   - è§‚å¯Ÿå­—ä½“æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢ä¸º Arial Unicode MS
   - æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—

2. **æµ‹è¯•å¯¼å…¥åŠŸèƒ½**:

   - é€‰æ‹©éŸ©è¯­è¯­è¨€
   - ç‚¹å‡»"å¯¼å…¥"æŒ‰é’®
   - æ£€æŸ¥å­—ä½“æ˜¯å¦ä¸º Arial Unicode MS
   - æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ç¡®è®¤å‡½æ•°è¢«è°ƒç”¨

3. **æµ‹è¯•å…¶ä»–è¯­è¨€**:
   - æµ‹è¯•ä¸­æ–‡ (CN) â†’ åº”è¯¥æ˜¯ STHeiti
   - æµ‹è¯•æ³°è¯­ (TH) â†’ åº”è¯¥æ˜¯ Arial Unicode MS
   - æµ‹è¯•è‹±è¯­ â†’ åº”è¯¥æ˜¯ Arial

## ç›¸å…³æ–‡ä»¶

- `FrontEnd/app/components/LabelEditor.tsx` - ä¸»è¦ä¿®æ”¹æ–‡ä»¶
  - ç¬¬ 1610-1657 è¡Œ: `getAutoFontsByLanguage` å‡½æ•°
  - ç¬¬ 1659-1779 è¡Œ: `handleLanguageChange` å‡½æ•°
  - ç¬¬ 1405-1478 è¡Œ: `handleImport` å‡½æ•°

## æ³¨æ„äº‹é¡¹

1. å¦‚æœæ•°æ®åº“ä¸­å·²ç»ä¿å­˜äº†å­—ä½“è®¾ç½®ï¼Œä¼šä¼˜å…ˆä½¿ç”¨æ•°æ®åº“ä¸­çš„è®¾ç½®
2. åªæœ‰åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰å­—ä½“è®¾ç½®æ—¶ï¼Œæ‰ä¼šä½¿ç”¨è‡ªåŠ¨é€‰æ‹©çš„å­—ä½“
3. è°ƒè¯•æ—¥å¿—å¸®åŠ©ç¡®è®¤å­—ä½“é€‰æ‹©é€»è¾‘æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
