# 对齐功能快速测试指南

## 🔧 本次修复的关键问题

**问题**：点击对齐按钮后，PDF 预览中看不到对齐效果

**根本原因**：`renderSixFields` 使用的 PDF 样式中缺少 `textAlign`、`direction`、`justifyContent` 属性

**修复位置**：`FrontEnd/app/components/PDFPreview.tsx` → `dynamicStyles` → `lineContainer` 和 `fieldLine`

---

## ✅ 快速测试步骤（5 分钟）

### 测试 1：基本对齐功能 (2 分钟)

1. **准备工作**

   - 刷新前端页面
   - 选择任意项目
   - 确保有文本内容（如果没有，导入一些文本）

2. **测试左对齐**

   - 点击"左对齐"按钮（应该显示蓝色背景）
   - 查看 PDF 预览区域
   - **✅ 验证**：文本靠左显示

3. **测试右对齐**

   - 点击"右对齐"按钮（应该显示蓝色背景）
   - 查看 PDF 预览区域
   - **✅ 验证**：文本靠右显示

4. **切换测试**
   - 来回点击左对齐/右对齐按钮
   - **✅ 验证**：PDF 预览立即响应变化

---

### 测试 2：UI 外观检查 (1 分钟)

1. **默认状态**

   - **✅ 验证**：左对齐按钮 = 蓝色背景 + 白色图标
   - **✅ 验证**：右对齐按钮 = 灰色背景 + 深灰色图标

2. **切换后状态**

   - 点击右对齐
   - **✅ 验证**：右对齐按钮 = 蓝色背景 + 白色图标
   - **✅ 验证**：左对齐按钮 = 灰色背景 + 深灰色图标

3. **Tooltip 测试**
   - 鼠标悬停在左对齐按钮上
   - **✅ 验证**：显示"左对齐"提示
   - 鼠标悬停在右对齐按钮上
   - **✅ 验证**：显示"右对齐"提示

---

### 测试 3：数据持久化 (2 分钟)

1. **保存并刷新**
   - 设置为"右对齐"
   - 点击"保存"按钮
   - 刷新浏览器页面
   - 重新选择相同项目
   - **✅ 验证**：右对齐按钮仍然是蓝色（已选中）
   - **✅ 验证**：PDF 预览显示右对齐

---

## 🎯 关键验证点

### PDF 预览中的对齐效果

**左对齐时应该看到**：

```
文本从左侧开始
所有行都靠左排列
文本方向：从左到右（LTR）
```

**右对齐时应该看到**：

```
                      文本从右侧开始
                   所有行都靠右排列
文本方向：从右到左（RTL）
```

---

## 🐛 如果测试失败

### 问题 1：点击按钮后 PDF 没有变化

**检查步骤**：

1. 打开浏览器控制台（F12）
2. 查看是否有 JavaScript 错误
3. 确认是否已刷新页面（Ctrl+R 或 Cmd+R）

**解决方案**：

- 硬刷新页面（Ctrl+Shift+R 或 Cmd+Shift+R）
- 清除浏览器缓存
- 检查 `PDFPreview.tsx` 文件是否已正确更新

### 问题 2：按钮外观不正确

**检查步骤**：

1. 查看 `LabelEditor.tsx` 是否已更新
2. 检查浏览器开发工具中的元素样式

**解决方案**：

- 硬刷新页面
- 检查 CSS 是否正确应用

### 问题 3：保存后刷新，设置丢失

**检查步骤**：

1. 查看浏览器控制台的网络请求
2. 确认保存请求是否成功（200 状态）
3. 检查数据库是否有 `text_align` 字段

**解决方案**：

- 确认数据库迁移已成功运行
- 检查后端日志是否有错误

---

## 📊 预期结果总结

| 测试项     | 预期结果                     | 测试状态 |
| ---------- | ---------------------------- | -------- |
| UI 外观    | 选中按钮蓝色，未选中按钮灰色 | ⬜       |
| 左对齐功能 | PDF 文本靠左显示             | ⬜       |
| 右对齐功能 | PDF 文本靠右显示，RTL 方向   | ⬜       |
| 数据持久化 | 刷新后设置保持               | ⬜       |
| Tooltip    | 悬停显示正确提示             | ⬜       |

---

## 🎉 测试通过后

所有测试项都打勾后，对齐功能已完全正常工作！

可以进行以下进阶测试（可选）：

- 测试不同语言的对齐效果
- 测试 PDF 导出功能
- 测试跨项目的对齐设置独立性

---

## 📝 修复记录

**修复日期**：2024-12-20  
**修复版本**：v2.0 - 完整修复  
**关键修复**：在 `PDFPreview.tsx` 的 `dynamicStyles` 中添加对齐相关样式属性

**修复文件**：

1. ✅ `FrontEnd/app/components/LabelEditor.tsx` - UI 和数据加载
2. ✅ `FrontEnd/app/components/ProjectList.tsx` - 数据加载
3. ✅ `FrontEnd/app/components/PDFPreview.tsx` - PDF 渲染样式（⚠️ 关键）

---

**准备就绪！现在可以开始测试了。** 🚀
